<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>T-Shirts</title>
</head>

<body>

  <div id="root"></div>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="t-shirts.js"></script>

  <script type="text/babel" data-type="module">

    import React, { useState } from "https://esm.sh/react@19";
    import ReactDOM from "https://esm.sh/react-dom@19/client";

    const App = () => {

      const [items, setItems] = useState(tshirts);

      function buyShirt(index, quantity) {

        const updated = [...items];

        updated[index].stock = updated[index].stock - quantity;

        setItems(updated);
      }

      return (
        <div>
          <h1>T-Shirts</h1>

          <div className="store">
            {items.map((shirt, index) => (
              <TShirtCard
                key={index}
                shirt={shirt}
                index={index}
                buyShirt={buyShirt}
              />
            ))}
          </div>

        </div>
      );
    }

    const TShirtCard = ({ shirt, index, buyShirt }) => {

      const [quantity, setQuantity] = useState(1);
      const options = [];

      for (let i = 1; i <= shirt.stock; i++) {
        options.push(
          <option key={i} value={i}>
            {i}
          </option>
        );
      }

      return (
        <div className="card">
          <img src={`images/${shirt.image}`} />

          <h3>{shirt.title}</h3>
          <p id="card-p">
            ${shirt.price.toFixed(2)}
          </p>
          <p>{shirt.stock} left!</p>

          {shirt.stock === 0 ? (
            <p style={{ color: "red" }}>Out of Stock</p>
          ) : (
            <div className="buy-section">

              <select
                value={quantity}
                onChange={(e) => setQuantity(Number(e.target.value))}
              >
                {options}
              </select>

              <button onClick={() => buyShirt(index, quantity)}>
                Buy
              </button>

            </div>
          )}

        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);

  </script>

</body>

</html>